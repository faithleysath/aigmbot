<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AIGM 帮助</title>
    <style>
        body {
            width: 1500px;
            box-sizing: border-box;
            background-color: #1B1C1D;
            color: #ffffff;
            padding: 50px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            font-size: 28px;
            line-height: 1.8;
            letter-spacing: 0.05em;
            margin: 0 auto;
        }
        h1 {
            font-size: 48px;
            color: #58A6FF;
            border-bottom: 2px solid #30363D;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h2 {
            font-size: 36px;
            color: #8B949E;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        code {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            background-color: #282A2C;
            color: #C3C5C3;
            padding: .2em .4em;
            margin: 0;
            font-size: 85%;
            border-radius: 6px;
        }
        .command-list {
            list-style-type: none;
            padding-left: 0;
        }
        .command-list li {
            margin-bottom: 15px;
        }
        .command-name {
            color: #79C0FF;
            font-weight: bold;
        }
        .command-desc {
            color: #ADBAC7;
        }
        .permission {
            color: #F0883E;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>AI GM 帮助手册</h1>

    <ul class="command-list">
        <li><code class="command-name">/aigm help</code> - <span class="command-desc">显示此帮助信息</span></li>
        <li><code class="command-name">/aigm status</code> - <span class="command-desc">查看当前群组的游戏状态</span></li>
        <li><code class="command-name">/aigm webui</code> - <span class="command-desc">获取当前游戏的 Web UI 地址</span></li>
    </ul>

    <h2>游戏管理</h2>
    <ul class="command-list">
        <li><code class="command-name">/aigm start [剧本]</code> - <span class="command-desc">启动新游戏（不带参数可获取Web UI链接）</span></li>
        <li><code class="command-name">/text_file <url></code> - <span class="command-desc">从 URL 加载剧本文件启动游戏</span></li>
        <li><code class="command-name">/aigm game list</code> - <span class="command-desc">列出所有游戏</span></li>
        <li><code class="command-name">/aigm game attach &lt;id&gt;</code> - <span class="command-desc">将游戏附加到当前频道</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm game detach</code> - <span class="command-desc">从当前频道分离游戏</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm game sethost @user</code> - <span class="command-desc">变更当前频道游戏的主持人</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm game sethost-by-id &lt;id&gt; @user</code> - <span class="command-desc">变更指定ID游戏的主持人</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm advanced-mode &lt;enable|disable|status&gt;</code> - <span class="command-desc">高级模式设置</span> <span class="permission">[主持人/管理员]</span></li>
    </ul>

    <h2>分支操作</h2>
    <ul class="command-list">
        <li><code class="command-name">/aigm branch list [all]</code> - <span class="command-desc">可视化显示分支图（all: 显示完整图）</span></li>
        <li><code class="command-name">/aigm branch show &lt;name&gt;</code> - <span class="command-desc">查看指定分支顶端的内容</span></li>
        <li><code class="command-name">/aigm branch history [name] [limit=N]</code> - <span class="command-desc">查看指定分支的历史记录</span></li>
        <li><code class="command-name">/aigm branch create &lt;name&gt; [from_round_id]</code> - <span class="command-desc">创建新分支</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm branch rename &lt;old&gt; &lt;new&gt;</code> - <span class="command-desc">重命名分支</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm branch delete &lt;name&gt;</code> - <span class="command-desc">删除分支</span> <span class="permission">[主持人/管理员]</span></li>
    </ul>

    <h2>历史与状态控制</h2>
    <ul class="command-list">
        <li><code class="command-name">/aigm checkout &lt;branch_name&gt;</code> - <span class="command-desc">切换到指定分支</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm checkout head</code> - <span class="command-desc">重新加载并显示最新状态</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm reset &lt;round_id&gt;</code> - <span class="command-desc">将当前分支重置到指定回合</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm round show &lt;id&gt;</code> - <span class="command-desc">查看指定回合的内容</span></li>
        <li><code class="command-name">/aigm round history &lt;id&gt; [limit=N]</code> - <span class="command-desc">查看指定回合及其历史记录</span></li>
    </ul>

    <h2>标签操作</h2>
    <ul class="command-list">
        <li><code class="command-name">/aigm tag list</code> - <span class="command-desc">列出所有标签</span></li>
        <li><code class="command-name">/aigm tag show &lt;name&gt;</code> - <span class="command-desc">查看标签指向的回合内容</span></li>
        <li><code class="command-name">/aigm tag history &lt;name&gt; [limit=N]</code> - <span class="command-desc">查看标签指向的回合的历史记录</span></li>
        <li><code class="command-name">/aigm tag create &lt;name&gt; [round_id]</code> - <span class="command-desc">创建新标签</span> <span class="permission">[主持人/管理员]</span></li>
        <li><code class="command-name">/aigm tag delete &lt;name&gt;</code> - <span class="command-desc">删除标签</span> <span class="permission">[主持人/管理员]</span></li>
    </ul>

    <h2>LLM 配置</h2>
    <ul class="command-list">
        <li><code class="command-name">/aigm llm status</code> - <span class="command-desc">查看当前群的 LLM 绑定状态</span></li>
        <li><code class="command-name">/aigm llm bind &lt;preset_name&gt; [duration]</code> - <span class="command-desc">绑定 LLM 预设</span></li>
        <li><code class="command-name">/aigm llm unbind</code> - <span class="command-desc">解除 LLM 绑定</span> <span class="permission">[所有者/管理员]</span></li>
        <li><code class="command-name">/aigm llm set-fallback &lt;preset_name&gt;</code> - <span class="command-desc">设置保底 LLM 预设</span> <span class="permission">[管理员]</span></li>
        <li><code class="command-name">/aigm llm clear-fallback</code> - <span class="command-desc">清除保底 LLM 预设</span> <span class="permission">[管理员]</span></li>
    </ul>

    <h2>缓存管理</h2>
    <ul class="command-list">
        <li><code class="command-name">/aigm cache pending clear</code> - <span class="command-desc">清空待处理的新游戏请求</span></li>
    </ul>

    <h2>管理员命令</h2>
    <ul class="command-list">
        <li><code class="command-name">/aigm admin unfreeze</code> - <span class="command-desc">强制解冻当前游戏</span> <span class="permission">[群管理/ROOT]</span></li>
        <li><code class="command-name">/aigm admin refresh-tunnel</code> - <span class="command-desc">重新刷新 Cloudflare tunnel</span> <span class="permission">[ROOT]</span></li>
        <li><code class="command-name">/aigm admin delete &lt;id&gt;</code> - <span class="command-desc">删除指定ID的游戏</span> <span class="permission">[ROOT]</span></li>
        <li><code class="command-name">/aigm admin clear-help-cache</code> - <span class="command-desc">清除帮助图片缓存</span> <span class="permission">[ROOT]</span></li>
    </ul>

</body>
